<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Jack B. Huber, Ph.D." />


<title>Data Support for Swedish Pharmacy Residents</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">Data Support for Swedish Pharmacy
Residents</h1>
<h4 class="author">Jack B. Huber, Ph.D.</h4>
<h4 class="date">May 2022</h4>

</div>


<div id="purpose-of-this-document" class="section level1">
<h1>Purpose of this Document</h1>
<p>The purpose of this document is to assemble some advice and resources
to support Swedish Pharmacy residents in their journey from project
proposal to a completed research project.</p>
</div>
<div id="planning-your-project" class="section level1">
<h1>Planning your Project</h1>
<div id="the-causal-logic-of-your-project" class="section level2">
<h2>The causal logic of your project</h2>
<p>Fundamentally, the resident research project is an effort to gather
causal evidence for the claim that a particular treatment or way of
utilizing medicine “worked” by being more effective than a rival or
pre-existing treatment. To plan data collection for the strongest causal
evidence is the purpose of research design <span class="citation">(<a
href="#ref-CampbellStanley1963" role="doc-biblioref">Campbell and
Stanley 1963</a>)</span>.</p>
<p>The ideal research design would be a pure experiment with random
assignment. The resident would randomly assign patients to treatment and
control conditions, then compare outcomes following treatment. In such a
scenario the resident could attribute any significant difference in
outcomes to the treatment because the groups would differ only by chance
in all other ways. Any pre-existing differences would be statistically
insignificant.</p>
<p>Because the resident cannot randomly assign patients to conditions
going forward, the project falls under the category of
<em><strong>quasi-experiment</strong></em>. This means it is more
vulnerable to confounding explanations of any difference in
outcomes.</p>
<p>The resident research project will culminate in a comparison between
two groups: a pre-implementation group and a post-implementation group.
One difference between the groups is time, and recent history has made a
big difference. Compare a pre-implementation group from the onset of the
pandemic with a high incidence of COVID-19 to a more recent
post-implementation group with much lower incidence of the virus. This
difference between the two groups in COVID-19 infection may combine with
the difference in drug dosing to influence treatment outcomes. This
difference in COVID-19 infection could therefore be a
<em><strong>confound</strong></em>.</p>
<p>The point is to clarify:</p>
<ul>
<li>What is the outcome to improve? This is the dependent variable.</li>
<li>What is the difference in treatment intended to cause the
improvement in the post-implementation group? This is the independent
variable.</li>
<li>All other variables are control variables. They should differ only
by chance. If there is a noticeable pre-existing difference, and the
level of that factor in one group affects the outcome, it is a
confound.</li>
</ul>
</div>
<div id="how-many-patients" class="section level2">
<h2>How many patients?</h2>
<p>Possibly the most pressing question for resident research projects
is: How many patients do I need? The resident research project will
culiminate in a series of comparisons between the pre-implementation and
post-implementation groups. Outcomes of the two samples will differ by
at least some quantity. The resident researcher expresses this
difference as an effect, like this:</p>
<p>Assume that this effect suggests more favorable outcomes for the
post-implementation group. This effect raises several questions:</p>
<ul>
<li>How do we evaluate this effect?</li>
<li>Could we attribute it to chance? (because it would be very unlikely
for both groups to have exactly the same outcomes)</li>
<li>Or is it larger than that?</li>
</ul>
<p>In statistical terms, this is a question of <strong>statistical
power</strong>. Power is the ability to isolate a treatment effect when
it really does exist <span class="citation">(<a href="#ref-Cohen1988"
role="doc-biblioref">Cohen 1988</a>)</span>. Power is a function of
effect size, sample size, and statistical significance. In order to
decide on a number of patients we need to have a sense of what size of
effect we want to reliably detect.</p>
<div class="figure">
<img src="index_files/figure-html/power-1.png" alt="Power Analysis" width="672" />
<p class="caption">
Power Analysis
</p>
</div>
<p>This a plot of power rates against these other variables. A large
effect (r ~ 0.5) is detectable with a sample of any size. But only large
samples have the power to detect a statistically significant (p &lt;
.05) small correlation (r = 0.1).</p>
<hr />
</div>
</div>
<div id="collecting-your-data" class="section level1">
<h1>Collecting your Data</h1>
<div id="data-sources" class="section level2">
<h2>Data Sources</h2>
<p>For collecting data from Epic, it might be helpful to have a sense of
the landscape of its different databases. There are three primary
databases:</p>
<p><img src="EpicDataLandscape.png" /></p>
<p><strong>Chronicles</strong>. This is the database that is collecting
data from Hyperspace in real time. For reporting, Reporting Workbench
pulls data directly from Chronicles, but it is otherwise not designed
very well for historical reporting.</p>
<p><strong>Clarity</strong>. This is the primary relational database for
reporting Epic data. Through a nightly process known as ETL
(“extract-transform-load”), Clarity extracts data from Chronicles and
stores it in a thousand bazillion tables (think “spreadsheets”). To pull
data for a report from Clarity is to identify the correct tables and
fields and to write a SQL query to join the tables, apply the
appropriate selection criteria, and report the appropriate fields.</p>
<p><strong>Caboodle</strong>. This a relatively new relational database
that functions essentially the same as Clarity but is designed to be
much easier to use. Caboodle uses fewer tables derived from myriad
Clarity tables which vastly simplifies the work and complexity of
writing a SQL query. The down side is not all Clarity data are in
Caboodle.</p>
</div>
<div id="granularity-of-data" class="section level2">
<h2>Granularity of data</h2>
<p>Granularity means two related things. One is the size of the data
point which is to say what context it provides for other, smaller, data
points. The other is, essentially this question: What does a row in the
spreadsheet mean? There are several different levels of granularity:</p>
<p><strong>Patient-level data</strong>. A patient has a unique ID
number: the MRN. No two patients have the same MRN. When it comes to
mining Epic data for the research project, the patient list is perhaps
the most important: the resident needs a “patient list”. When it comes
to data mining, the patient “level” is context to more granular data in
the sense that a patient can have multiple encounters - and thus
multiple Encounter CSNs “within” the same Patient MRN.</p>
<p><strong>Encounter-level data</strong>. The unique Epic ID number for
the encounter is the CSN. The encounter is context to more granular data
such as a treatment regimen of a particular medicine. Multiple drug
administrations can occur “within” an encounter CSN.</p>
<p><strong>Medication administration level data</strong>. This is
possibly the lowest level and the most granular data. In Caboodle, each
administration of a medicine has a unique ID number and is time-stamped.
My queries to date have been for counts of medicine administrations, or
firsts, lasts, minimums and maximum doses within a hospital encounter or
ICU stay.</p>
<p><strong>Lab results level data</strong>. Lab data is similar to
medicine administration data because, again in Caboodle, each lab result
is has its own unique ID number and is time-stamped. There can be a
great many lab results within a hospital encounter. My queries to date
have been for counts of lab results, or firsts, lasts, minimums and
maximum values within a hospital encounter or ICU stay.</p>
<p>The resident data collection form is designed for patient level data;
each row in the spreadsheet captures the experience of a hospital
encounter. It can also be helpful to report the medicine administration
and lab result data sorted chronologically by patient and encounter.</p>
</div>
<div id="advice-for-data-collection-and-management"
class="section level2">
<h2>Advice for Data Collection and Management</h2>
<p><strong>Be proactive</strong>. As you begin to decide what data to
collect, submit your project plan and requests for data in writing to me
(Jack) as soon as possible. This is so I can have a bit of time to
understand your project, do some discovery in Caboodle or Clarity, and
note any questions. Then meet with me via Teams to get on the same
page.</p>
<p><strong>Devise a system for organizing your data</strong>. By this I
mean version control. This data collection process is iterative. You
will ask for data and I’ll write a SQL query that produces an Excel
workbook of data. That’s one iteration. In all likelihood you’ll need a
revision or two. Upon receiving your feedback I’ll edit my query and
produce for you a new set of data to replace the first set. That’s the
second iteration. The more iterations, the more data, the more potential
for multiple versions and data overload. And I may not be able to do
more than a few iterations. I can work on some best practices to help us
through this. Stay tuned.</p>
<p><strong>There is no substitute for chart review</strong>. Some
fraction of resident research data can come from Epic data mining, but
it still needs to be validated with careful chart review. And some data
which are very difficult to mine or to query into the correct format may
have to come from chart review.</p>
<hr />
</div>
</div>
<div id="analyzing-your-data" class="section level1">
<h1>Analyzing your Data</h1>
<p>You have data. Congratulations! Let’s analyze!</p>
<div id="preparing-your-data-for-analysis" class="section level2">
<h2>Preparing your data for analysis</h2>
<p>The first step is to complete a number of tasks to prepare your data
for analysis. One data matrix. See the exemplar.</p>
</div>
<div id="choosing-appropriate-statistics" class="section level2">
<h2>Choosing appropriate statistics</h2>
<p>It is important to know the measurement level of your variables. How
do you express the outcome by which to compare your pre- and post-
samples? Is it…</p>
<ul>
<li>Mortality rate (% surviving)? In such a case you would be comparing
two proportions.</li>
<li>“Time to…” a therapeutic level? In such a case you would be
comparing two different quantities of time.</li>
</ul>
<div id="odds-ratios" class="section level3">
<h3>Odds ratios</h3>
</div>
<div id="chi-square-test-of-independence" class="section level3">
<h3>Chi-square test of independence</h3>
</div>
<div id="two-sample-t-test" class="section level3">
<h3>Two-sample t-test</h3>
</div>
<div id="z-test-of-the-difference-of-proportions"
class="section level3">
<h3>Z test of the difference of proportions</h3>
</div>
<div id="cohens-d-effect-size" class="section level3">
<h3>Cohen’s <em>d</em> effect size</h3>
<hr />
</div>
</div>
</div>
<div id="reporting-your-results" class="section level1">
<h1>Reporting your Results</h1>
<div id="advice-on-graphs" class="section level2">
<h2>Advice on graphs</h2>
</div>
<div id="advice-on-tables" class="section level2">
<h2>Advice on tables</h2>
<hr />
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-CampbellStanley1963" class="csl-entry">
Campbell, Donald T., and Julian C. Stanley. 1963. <em>Experimental and
Quasi-Experimental Designs for Research</em>. Houghton Mifflin Company.
</div>
<div id="ref-Cohen1988" class="csl-entry">
Cohen, Jacob. 1988. <em>Statistical Power Analysis for the Behavioral
Sciences</em>. 2nd ed. Mahwah, New Jersey: Lawrence Erlbaum Associates.
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
